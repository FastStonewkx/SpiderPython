# 代理的基本原理

频繁登陆某个网站，执行自动化访问操作，经常会出现403 Forbidden，可能会看到"您的IP访问频率太高了"这样的提示。这往往是由于网站采取了反爬虫机制。比如，服务器会检测某个IP在单位时间内的请求次数，如果超过了阈值，会拒绝服务，返回一些错误信息，这种情况被称为封IP。

借助某种手段伪装IP让服务器无法识别出是由本机发起的请求，一种有效的方法就是使用代理。

##  代理的基本原理

代理实际上就是代理服务器，proxy server，功能是代理网络用户去取得网络信息。

它是一个信息中转站，在本机和服务器中间搭建了一个桥，本机不直接向服务器发请求，而是将请求发给代理服务器，然后代理服务器在发给web服务器。响应也是如此。
在这个过程中，web服务器设别出的真实IP就不是我们本身的IP，成功实现了IP伪装。

## 代理的作用

- 突破自身的访问限制，访问一些平时不能访问的站点。
- 访问一些单位或者团体的内部资源：比如使用教育网内地址段免费代理服务器，用于对教育网开放的各类FTP下载上传，资源共享
- 提高访问速度：代理服务器都设置了一个较大的硬盘缓冲区，外界信息通过时，将其保存到缓冲区，其他用户在访问相同的信息时，直接由缓冲区取出传给用户，提高访问速度
- 隐藏真实IP：上网者通过代理免受攻击。对于爬虫来说，就是为了隐藏自身IP。

## 代理分类

###  根据协议区分

- ftp代理服务器：用于访问ftp服务器，端口一般为21、2121等
- HTTP代理服务器：主要用于访问网页，一般有内容过滤和缓存功能，端口一般为80、8080、3128等
- SSL/TLS代理：主要用于访问加密网站，一般有SSL或TLS加密功能（最高支持128位机密强度），端口为443等
- RTSP代理：主要用于访问Real流媒体服务器，一般有缓存功能，端口一般为554。
- Telnet代理：主要用于telnet远程控制（黑客入侵电脑时常用于隐藏身份），端口一般为23.
- POP3/SMTP代理：主要用于POP3/SMTP方式收发邮件，一般有缓存功能，端口一般为110/25
- SOCKS代理：只是单纯传递数据包，不关心具体协议和用法。（比较复杂，后面学习）

### 根据匿名程度区分

- 高匿名代理：数据包原封不动地转发
- 普通匿名代理：数据包上做一些改动，有一定几率会被服务器发现代理，或者追查到客户真实IP
- 透明代理：不但改动了数据包，还会告诉服务器客户端真实的IP。主要用于提高浏览速度，内容过滤提高安全性。（如内网中的硬件防火墙）
- 间谍代理：组织或者个人用于记录用户传输的数据，研究、监控等目的的代理服务器。

## 常见的代理设置

- 网上的免费代理
- 使用付费代理
- ADSL拨号